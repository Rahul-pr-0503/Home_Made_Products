{% extends "base.html" %}
{% block content %}

<head>
  <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" />
</head>

<h2 class="fw-bold text-center mb-4">üõç Explore Our Products</h2>

<div class="row">
  {% for product in products %}
  <div class="col-md-3 col-sm-6 mb-4">
    <div class="card h-100 shadow-sm product-card">
      <!-- Product Image -->
      {% if product['image_filename'] %}
      <img src="{{ url_for('static', filename='uploads/' ~ product['image_filename']) }}"
        class="card-img-top img-fluid p-2 rounded" style="height:220px; object-fit:contain;"
        alt="{{ product['name'] }}">
      {% else %}
      <div class="text-center text-muted p-5">No Image</div>
      {% endif %}

      <!-- Card Body -->
      <div class="card-body d-flex flex-column">
        <h5 class="card-title text-truncate">{{ product['name'] }}</h5>
        <p class="card-text text-muted small">{{ product['description'][:60] }}...</p>

        <!-- Price + Stock -->
        <div class="mt-auto">
          <h6 class="fw-bold text-success">‚Çπ{{ product['price'] }}</h6>
          {% if product['stock'] > 5 %}
          <span class="badge bg-success">In Stock</span>
          {% elif product['stock'] > 0 %}
          <span class="badge bg-warning text-dark">Limited Stock</span>
          {% else %}
          <span class="badge bg-danger">Out of Stock</span>
          {% endif %}
        </div>
      </div>

      <!-- Actions -->
      <div class="card-footer bg-white border-0">
        <a href="{{ url_for('product_detail', pid=product['id']) }}"
          class="btn btn-sm btn-outline-primary w-100 mb-2">View Details</a>
        {% if product['stock'] > 0 %}
        <form method="post" action="{{ url_for('add_to_cart', pid=product['id']) }}">
          <button type="submit" class="btn btn-sm btn-primary w-100">‚ûï Add to Cart</button>
        </form>
        {% else %}
        <button class="btn btn-sm btn-secondary w-100" disabled>Out of Stock</button>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Extra CSS for hover effect -->
<style>
  .product-card {
    transition: all 0.3s ease-in-out;
  }

  .product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0px 6px 18px rgba(0, 0, 0, 0.15);
  }
</style>

{% endblock %}